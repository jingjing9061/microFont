import t,{h as e}from"vue";function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o={props:{config:[Object,Promise],wrapWith:String,wrapClass:String,wrapStyle:Object,mountParcel:Function,parcelProps:Object},render:function(r){r="function"==typeof r?r:e||t&&t.h;var n=this.wrapWith||"div",o={ref:"container"};return this.wrapClass&&(o.class=this.wrapClass),this.wrapStyle&&(o.style=this.wrapStyle),r(n,o)},data:function(){return{hasError:!1}},methods:{addThingToDo:function(t,e){var r=this;this.hasError&&"unmount"!==t||(this.nextThingToDo=(this.nextThingToDo||Promise.resolve()).then((function(){if(!r.unmounted||"unmount"===t){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e.apply(r,o)}})).catch((function(e){throw r.nextThingToDo=Promise.resolve(),r.hasError=!0,e&&e.message&&(e.message="During '".concat(t,"', parcel threw an error: ").concat(e.message)),r.$emit("parcelError",e),e})))},singleSpaMount:function(){var t=this;return this.parcel=this.mountParcel(this.config,this.getParcelProps()),this.parcel.mountPromise.then((function(){t.$emit("parcelMounted")}))},singleSpaUnmount:function(){if(this.parcel)return this.parcel.unmount()},singleSpaUpdate:function(){var t=this;if(this.parcel&&this.parcel.update)return this.parcel.update(this.getParcelProps()).then((function(){t.$emit("parcelUpdated")}))},getParcelProps:function(){return function(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}({domElement:this.$refs.container},this.parcelProps||{})}},mounted:function(){if(!this.config)throw Error("single-spa-vue: <parcel> component requires a config prop.");if(!this.mountParcel)throw Error("single-spa-vue: <parcel> component requires a mountParcel prop");this.config&&this.addThingToDo("mount",this.singleSpaMount)},destroyed:function(){this.addThingToDo("unmount",this.singleSpaUnmount)},watch:{parcelProps:{handler:function(t){this.addThingToDo("update",this.singleSpaUpdate)}}}};export default o;
//# sourceMappingURL=parcel.js.map
